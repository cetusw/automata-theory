# Regex -> NFA -> DFA -> Minimized DFA Converter

Это консольная утилита, написанная на Go, которая выполняет полный цикл преобразования **Регулярного выражения** в **Минимизированный Детерминированный Конечный Автомат (ДКА)**.

Программа принимает на вход файл с регулярным выражением, проходит через цепочку преобразований и выдает результат в формате `.dot` (Graphviz).

## Алгоритм работы

Утилита реализует классический конвейер компиляции регулярных выражений:

1.  **Парсинг (Regex -> Postfix):** Входное выражение преобразуется в обратную польскую запись (Postfix notation) для корректной обработки приоритетов операций (используется вариация алгоритма *Shunting-yard*).
2.  **Построение НКА (Postfix -> NFA):** По постфиксному выражению строится Недетерминированный Конечный Автомат с использованием [Алгоритма Томпсона](https://neerc.ifmo.ru/wiki/index.php?title=%D0%9F%D0%BE%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE_%D0%9D%D0%9A%D0%90_%D1%8D%D0%BA%D0%B2%D0%B8%D0%B2%D0%B0%D0%BB%D0%B5%D0%BD%D1%82%D0%BD%D0%BE%D0%B3%D0%BE_%D0%94%D0%9A%D0%90,_%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC_%D0%A2%D0%BE%D0%BC%D0%BF%D1%81%D0%BE%D0%BD%D0%B0). Поддерживаются ε-переходы.
3.  **Детерминизация (NFA -> DFA):** НКА преобразуется в ДКА.
4.  **Минимизация (DFA -> Minimized DFA):** Полученный ДКА оптимизируется путем объединения эквивалентных состояний (используется алгоритм измельчения разбиений / Partition Refinement).

## Поддерживаемый синтаксис

Утилита поддерживает следующие операции в регулярных выражениях:
*   `a` ... `z`, `A` ... `Z`, `0` ... `9` — литералы.
*   `|` — альтернатива (или).
*   `*` — замыкание Клини (0 или более раз).
*   `()` — группировка.
*   `ε` — эпсилон (пустой переход).
*   `ab` — конкатенация.

## Запуск

Для работы требуется установленный Go (версия 1.25 или выше).

Утилита запускается из командной строки с указанием флагов `-in` и `-out`.

-   `-in`: путь к входному файлу .txt с регулярным выражением.
-   `-out`: путь к файлу, в который будет сохранен результат (граф в формате DOT).

**Общий вид команды:**
```bash
go run cmd/main.go -in <input_file> -out <output_file>
```

**Пример использования:**

Создайте файл `input.txt` с содержимым `(a|b)*abb`:

```bash
go run cmd/main.go -in input.txt -out result.dot
```

После этого файл `result.dot` можно визуализировать с помощью Graphviz:
```bash
dot -Tpng result.dot -o output.png
```

## Тестирование

Проект содержит набор интеграционных тестов, проверяющих корректность построения автоматов для различных регулярных выражений.

Для запуска тестов используйте команду:

```bash
go test -v ./pkg/tests/
```

Тесты выполняют полный прогон (от регулярного выражения до минимизированного ДКА) и сверяют полученную структуру графа с эталонной.